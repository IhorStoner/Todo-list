'use strict';function showContent(){localStorageData();createElement('<button/>','.todolist','btnAddItem','Add new note','btnNewNote');$('#btnAddItem').click(handleAddNewItem);createElement('<button/>','.todolist','btnShowNotes','Show notes','btnShowNotes');$('#btnShowNotes').click(handleShowNotes)}function handleShowNotes(){deleteContent();var noteArr=JSON.parse(localStorage.getItem('notes'));var _loop=function _loop(i){createElement('<div/>','.todolist','noteItem'+i,'','note');createElement('<h2/>','#noteItem'+i,'noteTitle'+i,noteArr[i].text);createElement('<p/>','#noteItem'+i,'notePriority'+i,noteArr[i].priority);createElement('<p/>','#noteItem'+i,'noteStatus'+i,'Status: '+noteArr[i].status);var get=function get(url){return fetch(url).then(function(res){return res.json()})};get('js/data.json').then(function(data){var getEntityFromPayload=function getEntityFromPayload(payload,predicate){return payload.find(function(entry){return entry===predicate})};var checkStatus=getEntityFromPayload(data.statuses,noteArr[i].status);var checkPriority=getEntityFromPayload(data.priorities,noteArr[i].priority);if(!checkPriority){$('#notePriority'+i).text('Not defined');/// or res.priorities[0] 
}if(!checkStatus){$('#noteStatus'+i).text('Not defined');/// or res.priorities[0] 
}});createElement('<button/>','#noteItem'+i,'noteEdit'+i,'Edit','btnEdit','','',[['data-idNote',noteArr[i].id],['data-idNoteDiv','#noteItem'+i]]);createElement('<button/>','#noteItem'+i,'noteDelete'+i,'','btnDelete','','',[['data-idNote',noteArr[i].id],['data-idNoteDiv','#noteItem'+i]])};for(var i=0;i<noteArr.length;i++){_loop(i)}$('.btnEdit').click(handleEditNote);$('.btnDelete').click(handleDeleteNote)}function handleEditNote(){var idNote=event.target.getAttribute('data-idnote');var notesArr=JSON.parse(localStorage.getItem('notes'));var idNoteDiv=event.target.getAttribute('data-idNoteDiv');// не уверен что правильно написал и есть ли смысл менять
// const selectedNote = (notesArr) => {
//     notesArr.find(function(noteItem)) {
//         return noteItem.id === idNote;
//     }
// }       
var selectedNote=notesArr.find(function(noteItem){return noteItem.id===idNote});editNote(idNoteDiv,selectedNote)}function editNote(idNoteDiv,selectedNote){handleShowNotes();$(idNoteDiv).text('');$(idNoteDiv).addClass('editBlock');var regDivId=/\d/;var divId=idNoteDiv.match(regDivId);createElement('<h2/>','#noteItem'+divId[0],'newNoteTitle','Edit note');createElement('<input/>','#noteItem'+divId[0],'noteName','','noteInput','Enter note');createElement('<select/>','#noteItem'+divId[0],'noteSelectPriority','','noteInput');createElement('<select/>','#noteItem'+divId[0],'noteSelectStatus','','noteInput');var get=function get(url){return fetch(url).then(function(res){return res.json()})};get('js/data.json').then(function(res){for(var i=0;i<res.statuses.length;i++){createElement('<option/>','#noteSelectStatus','noteOption'+i,res.statuses[i],'noteInput','',res.statuses[i])}for(var _i=0;_i<res.priorities.length;_i++){createElement('<option/>','#noteSelectPriority','noteOption'+_i,res.priorities[_i],'noteInput','',res.priorities[_i])}});createElement('<button/>','#noteItem'+divId[0],'btnSave','Save','','','',[['data-idNote',selectedNote.id],['data-idNoteDiv',idNoteDiv]]);createElement('<button/>','#noteItem'+divId[0],'btnBack','Back','btnOk');$('#btnSave').click(handleSaveNote);$('#btnBack').click(handleShowNotes)}function handleSaveNote(){var idNote=event.target.getAttribute('data-idnote');var notesArr=JSON.parse(localStorage.getItem('notes'));var selectedNote=notesArr.find(function(noteItem){return noteItem.id===idNote});var indexElement=notesArr.indexOf(selectedNote);selectedNote.priority=$('#noteSelectPriority').val();selectedNote.status=$('#noteSelectStatus').val();if($('#noteName').val()===''){selectedNote.text}else{selectedNote.text=$('#noteName').val()}notesArr.splice(indexElement,1,selectedNote);localStorage.setItem('notes',JSON.stringify(notesArr));handleShowNotes()}function handleDeleteNote(){var idNote=event.target.getAttribute('data-idnote');var notesArr=JSON.parse(localStorage.getItem('notes'));var idNoteDiv=event.target.getAttribute('data-idNoteDiv');var selectedNote=notesArr.find(function(noteItem){return noteItem.id===idNote});confirmDeleteNote(idNoteDiv,selectedNote)}function confirmDeleteNote(idNoteDiv,selectedNote){handleShowNotes();$(idNoteDiv).text('');$(idNoteDiv).addClass('confirmBlock');createElement('<h2/>',idNoteDiv,'confirmTitle','Delete note?');createElement('<button/>',idNoteDiv,'btnYes','Yes','','','',[['data-idNote',selectedNote.id],['data-idNoteDiv',idNoteDiv]]);createElement('<button/>',idNoteDiv,'btnNo','No');$('#btnYes').click(handleBtnYes);$('#btnNo').click(handleShowNotes)}function handleBtnYes(){var idNote=event.target.getAttribute('data-idnote');var notesArr=JSON.parse(localStorage.getItem('notes'));var selectedNote=notesArr.find(function(noteItem){return noteItem.id===idNote});console.log(selectedNote);var indexElement=notesArr.indexOf(selectedNote);notesArr.splice(indexElement,1);localStorage.setItem('notes',JSON.stringify(notesArr));handleShowNotes()}function handleAddNewItem(){deleteContent();createElement('<div/>','.todolist','noteContent','','noteContent');createElement('<h2/>','.noteContent','newNoteTitle','Add new note');createElement('<input/>','.noteContent','noteName','','noteInput','Enter note');createElement('<select/>','.noteContent','noteSelectPriority','','noteInput');createElement('<select/>','.noteContent','noteSelectStatus','','noteInput');var get=function get(url){return fetch(url).then(function(res){return res.json()})};get('js/data.json').then(function(res){for(var i=0;i<res.statuses.length;i++){createElement('<option/>','#noteSelectStatus','noteOption'+i,res.statuses[i],'noteInput','',res.statuses[i])}for(var _i2=0;_i2<res.priorities.length;_i2++){createElement('<option/>','#noteSelectPriority','noteOption'+_i2,res.priorities[_i2],'noteInput','',res.priorities[_i2])}});createElement('<button/>','.noteContent','btnOk','OK','btnOk');$('#btnOk').click(handleAddNote)}function handleAddNote(){var check=0;var checkNote=/\w{1,}/;if($('#noteName').val()===''||$('#noteName').val().match(checkNote)===null){$('#noteName').addClass('invalid')}else{$('#noteName').removeClass('invalid');check++}if(check===1){var notesArr=JSON.parse(localStorage.getItem('notes'));var newNote=new NewNote($('#noteName').val(),$('#noteSelectPriority').val(),$('#noteSelectStatus').val(),notesArr);notesArr.push(newNote);localStorage.setItem('notes',JSON.stringify(notesArr));handleShowNotes()}}function createElement(tag,parent,idElem,text,className,placeholder,value,attrArr){$(tag,{id:idElem}).appendTo($(parent));if(text){$('#'+idElem).text(text)}if(className){$('#'+idElem).addClass(className)}if(placeholder){$('#'+idElem).attr('placeholder',placeholder)}if(value){$('#'+idElem).val(value)}if(attrArr){for(var i=0;i<attrArr.length;i++){$('#'+idElem).attr(attrArr[i][0],attrArr[i][1])}}}function localStorageData(){var notesArr=localStorage.getItem('notes');if(!notesArr){localStorage.setItem('notes',JSON.stringify(notes))}}function deleteContent(){if($('.noteContent')){$('.noteContent').remove()}if($('.note')){$('.note').remove()}}